<!-- datasets/home.html -->
{% extends "main/base.html" %}
{% block title %}<title>WHG::Dashboard</title>{% endblock %}

{% block content %}
  {% load static %}
  {% load fontawesome %}
  {% load mathfilters %}

  <div class="container">
    <div id="dataset_list" class="mt-3">
      <h4 class="mt-3">My Datasets
        <a href="{% url 'datasets:dataset-create' %}" class="ml-5">{% fontawesome_icon 'plus-square' color='#336699' %}</a></h4>
      <div class="list-box">
        <table class="table table-striped">
          <thead>
              <th>id</th>
              <th>name</th>
              <th>label</th>
              <th>uploaded</th>
              <th>format</th>
              <th># rows</th>
              <th>status</th>
              <th>&nbsp;</th>
          </thead>
          <tbody>
            {% for d in dataset_list %}
              <tr class="place-row">
                <!-- <td><span class="edit-row" style="cursor:pointer;">
                  {# fontawesome_icon 'edit' color='#336699' #}</span</td> -->
                <td>{{ d.id }}</td>
                <td><a href="{% url 'datasets:dataset-detail' d.id %}">{{ d.name }}</a></td>
                <td>{{ d.label }}</td>
                <td>{{ d.upload_date }}</td>
                <td>{{ d.format }}</td>
                <td>{{ d.numrows }}</td>
                <td>{{ d.status }}</td>
                <td>
                  {% if d.status == "format_ok" %}
                  <a href="{% url 'datasets:ds_insert' d.id %}" title="Insert to db" rel="tooltip"
                  class="">{% fontawesome_icon 'database' color='#336699' %}</a>
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div id="area_list" class="mt-3">
      <h4 class="mt-3">My Study Areas
        <a href="{% url 'areas:area-create' %}" class="ml-5">
          {% fontawesome_icon 'plus-square' color='#336699' %}</a></h4>
      <div class="list-box">
        <p>list of user-created study areas</p>
        {% for a in area_list %}
          <p>{{ a.title }} ({{ a.id }}); {{ a.ccodes }}</p>
        {% endfor %}
      </div>
    </div>
  </div> <!-- container -->
  <script>
    $("[rel='tooltip']").tooltip();
  </script>
{% endblock %}
