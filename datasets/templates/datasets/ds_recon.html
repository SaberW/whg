<!-- datasets/ds_grid.html -->
{% extends "main/base.html" %}
{% load fontawesome %}
{% load static %}

{% block title %}<title>Dataset {{ ds.id }}</title>{% endblock %}
{% block extra_head %}

{% endblock %}
{% block content %}
<!-- incoming: ds, place_list -->
<div class="container flex">
<h4 class="mb-3 mt-3">{% fontawesome_icon 'link' color='#336699' %} Reconciliation for {{ ds.name }} ({{ ds.label }})</h4>
<hr/>
<div class="row">
  <div class="col-sm-4">
    <form action="{% url 'datasets:ds_recon' ds.id %}" method="POST">
      {% csrf_token %}
      <input type="hidden" name="ds" value="{{ ds.id }}">
      <div class="form-check">
        <label class="form-check-label" for="auth1">
          <input type="radio" class="form-check-input" id="auth1"
            name="recon" value="tgn" checked>Getty TGN (tgn)
            <span class="ml-2 text-success">{ TODO: task status }</span>
            <!-- <span class="ml-2 text-success">{{ context.response }}</span> -->
        </label>
      </div>
      <div class="form-check">
        <label class="form-check-label text-muted" for="auth2">
          <input type="radio" class="form-check-input" id="auth2"
            name="recon" value="dbp" disabled>DBpedia (dbp)
            <span class="ml-2 text-success"></span>
        </label>
      </div>
      <div class="form-check">
        <label class="form-check-label text-muted" for="auth3">
          <input type="radio" class="form-check-input" id="auth3"
            name="recon" value="wd" disabled>Wikidata (wd)
            <span class="ml-2 text-success d-none"> </span>
        </label>
      </div>
      <div class="form-check">
        <label class="form-check-label text-muted" for="auth4">
          <input type="radio" class="form-check-input" id="auth4"
            name="recon" value="gn" disabled>GeoNames (gn)
            <span class="ml-2 text-success d-none"></span>
        </label>
      </div>
      {% if request.method == 'GET' %}
      <br/>
      <button type="submit" class="btn btn-primary">Start</button>
      {% endif %}
    </form>
  </div>
  {% if context.response %}
  <div class="col-sm-8">
    <p class="text-warning">{ TODO: progress bar }</p>
    <p><b>Authority</b>: {{ context.authority }}</p>
    <p><b>Task ID</b>: {{ context.task_id }}</p>
    <p class="mb-3"><b>Result summary</b>:
      {{ context.result }}    </p>
    <button type="submit" action="javascript:alert('load review app')" class="btn btn-primary">Review hits</button>
  </div>
  {% endif %}
</div>
<!--
'count':count,
'got-hits':count_hit,
'total-hits': result_obj['total_hits'] -->
<script type="text/javascript">
</script>
{% endblock %}
